<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level Creator</title>
    <link rel="stylesheet" href="levelCreatorStyle.css">


</head>
<body>
    <div class="container">
        <h1>Level Creator</h1>
		<div style="display:inline-flex; gap:8px; align-items:center;">           
			<input type="file" id="importMonstersFile" accept="text/csv" style="display:none" />			
            <button id="btnImportMonsters" style="padding:6px 8px; font-size:12px; border-radius:6px;">Import Monsters</button>
            <button id="btnExportMonsters" style="padding:6px 8px; font-size:12px; border-radius:6px;">Export Monsters</button>
           <button id="btnSave" onclick="saveSet()" >save</button> 
        </div>
<div class="gridParent">
<div class="leftPanel">
<h2>Level List</h2>
<select name="levels" onchange="changeLevel()" title="Level List" id="levelSelect" size="20"></select>
<button id="btnNew" onclick="levelNew()" >New</button>
<button id="btnCopy" onclick="levelCopy()">Copy</button>
<button id="btnDelete" onclick="levelDelete()">Delete</button>
<button id="btnSort" onclick="sortLevelList()">Sort</button>
</div>
<div class="mainBody">
        <div class="top-section" title="Level creation controls">
		<h2>Level Settings</h2>
			<div class="row">
				<label for="inputLevelId">Level ID:</label>
                <input type="text" onchange="updateID()" id="inputLevelId" placeholder="uniqueIdentifier" style="flex: 1; max-width: 200px;">
				<label for="nextLevelSelect">Next level:</label>
				<select name="nextLevelId" onchange="updateNext()" style="flex: 1;" id="nextLevelSelect"></select>
            </div>

            <div class="row">
                <label for="inputRows">Rows:</label>
                <input type="number" id="inputRows" min="1" max="12" value="6" aria-describedby="rowsHelp">
                <label for="inputCols">Cols:</label>
                <input type="number" id="inputCols" min="1" max="12" value="6" aria-describedby="colsHelp">
                <button id="btnCreateGrid">Create Grid</button>
            </div>
			
			<div class="row">
                <h2 class="item-label" id="itemTypeLabel">Tools</h2>
				<button class="item-btn" id="btnSelect" data-item="select">Select (I)</button>
                <button class="item-btn" data-item="eraser" >Eraser (E)</button>
                <button class="item-btn" data-item="wall" >Wall (W)</button>
                <button class="item-btn" data-item="custom_wall" >Custom Wall (C)</button>
                <button class="item-btn" data-item="monster" >Monster (M)</button>
                <button class="item-btn" data-item="treasure" >Treasure (T)</button>
                <button class="item-btn" data-item="key" >Key (K)</button>
                <button class="item-btn" data-item="door">Door (D)</button>
                <button class="item-btn" data-item="exit" >Exit (X)</button>
				<button class="item-btn" data-item="stairs" >Stairs (U)</button>
                <button class="item-btn" data-item="potion" >Potion (P)</button>
                <button class="item-btn" data-item="void" aria-label="Place voids on the grid">Void (V)</button>
                <button class="item-btn" data-item="weapon_shop" ">Weapon Shop (S)</button>
                <button class="item-btn" data-item="armor_shop" >Armor Shop (A)</button>
                <button class="item-btn" data-item="inn" >Inn (N)</button>
                <button class="item-btn" data-item="villager" >Villager (L)</button>
            </div>
			<h2>Cell Properties</h2>
            <div class="row" id="monsterLibraryContainer" style="margin-top:8px; border-top:1px dashed #ccc; padding-top:8px;">
                <div style="flex:1;>
                    <div style="font-weight:600; margin-bottom:6px;">Monster Library</div>
                    <div style="display:flex; flex-wrap: wrap;  gap:8px; align-items:center; margin-bottom:6px;">
					    
                        <label for="monsterName" style="display:flex;flex-wrap: wrap; flex-direction:column;font-size:12px;flex:1;">
						monster Name: 
                        </label>
                            <input id="monsterName" placeholder="Name" />
                       <div>
                        <label for="monsterHP" style="display:flex;flex-direction:column;font-size:12px;">
                            <span >HP</span></label>
                            <input class="spinbox" id="monsterHP" type="number" min="1" value="6"  />
                       </div><div> 
                        <label for="monsterATK" style="display:flex;flex-direction:column;font-size:12px;">
                            <span >ATK</span></label>
                            <input class="spinbox" id="monsterATK" type="number" min="0" value="2" />
                        </div><div> 
                        <label for="monsterDEF" style="display:flex;flex-direction:column;font-size:12px;">
                            <span >DEF</span></label>
                            <input id="monsterDEF"  class="spinbox" type="number" min="0" value="0" />
                        </div>
                        <button id="btnAddMonster">Add Monster</button>
                        <button id="btnCancelEdit" style="display:none; margin-left:6px;">New monster</button>
                    </div>
                    <div style="display:flex; gap:8px; margin-top:6px;">
						<div>
						<label for="monsterDesc1">Attack description 1</label>
                        <input id="monsterDesc1" placeholder="Description 1 (attacked)" style="flex:1;" />
						</div>
						<div>
						<label for="monsterDesc2">Description 2</label>
                        <input id="monsterDesc2" placeholder="Description 2 (attacked)" style="flex:1;" />
						</div>
						<div>
						<label for="monsterDesc3">Description 3</label>
                        <input id="monsterDesc3" placeholder="Description 3 (attacked)" style="flex:1;" />
						</div>
                    </div>
					<div style="display:flex; gap:8px; margin-top:6px;">
						
						<label for="monRewKind">Reward type:</label>
						<select id="monRewKind">
							<option value="gold">Gold</option>
							<option value="power">Power</option>
							<option value="defense">Defense</option>
							<option value="life">Life</option>
						</select>
						<label for="monRewValue">Value:</label>
						<input  id="monRewValue" type="number" min="1" value="25" />
						<label for="monRewDesc">Reward description: </label>
						     <input id="monRewDesc"/>
				</div>
				<div id="monsterParent">
                    <table id="monsterList" class="monster-list">
						
					</table>
                </div></div>
            </div>


            <div class="row" id="treasureConfig" style="display:none; align-items:center;">
                <label onchange="treasureUpdate()" for="treasureKind">Treasure type:</label>
                <select  onchange="treasureUpdate()"  id="treasureKind">
                    <option value="gold">Gold</option>
                    <option value="power">Power</option>
                    <option value="defense">Defense</option>
                </select>
                <label for="treasureValue">Value:</label>
                <input  onchange="treasureUpdate()" id="treasureValue" type="number" min="1" value="25" />
                <span style="font-size:12px;">Set the amount of gold or the buff amount.</span>
            </div>

            <div class="row" id="stairConfig" style="display:none; align-items:center;">
                <label for="stairLevelSelect">Target Level:</label>
                <select  onchange="stairUpdate()"  id="stairLevelSelect">
                </select>
                <label for="stairCellSelect">Target Cell:</label>
                <select  onchange="stairUpdate()" id="stairCellSelect"/></select>
            </div>

            <div class="row" id="keyConfig" style="display:none; align-items:center;">
                <label for="keyLevelSelect">Key Level:</label>
                <select  onchange="keyUpdate()"  id="keyLevelSelect">
                </select>
            </div>


            <div class="row" id="potionConfig" style="display:none; align-items:center;">
                <label for="potionHeal">Potion heal:</label>
                <input id="potionHeal" type="number" min="1" value="10" />
                <span style="font-size:12px;">Amount of life restored when drinking this potion.</span>
            </div>

            <div class="row" id="villagerConfig" style="display:none; align-items:center; gap:8px;">
                <label for="villagerText">Villager text:</label>
                <input id="villagerText" onchange="villagerUpdate()" type="text" placeholder="Villager says..." style="flex:1; max-width:400px;" />
                <label for="villagerKind">Reward type:</label>
                <select id="villagerKind" onchange="villagerUpdate()" >
                    <option value="gold">Gold</option>
                    <option value="power">Strength</option>
                    <option value="defense">Defense</option>
                </select>
                <label for="villagerValue">Value:</label>
                <input onchange="villagerUpdate()" id="villagerValue" type="number" min="1" value="25" />
                <span style="font-size:12px;">Villager spoken text and an optional reward amount.</span>
            </div>

            <div class="row" id="customWallConfig" style="display:none; align-items:center; gap:8px;">
                <label for="customWallName">Custom wall name:</label>
                <input id="customWallName" type="text" placeholder="e.g. Stone Hedge" style="flex:1; max-width:300px;" />
                <span style="font-size:12px;">Optional name shown in the editor and exports.</span>
            </div>

            <div class="row">
                <label for="inputDesc">Cell description:</label>
                <input type="text" id="inputDesc" placeholder="Enter description for selected cell" style="flex: 1; max-width: 400px;" aria-describedby="descHelp">
                <button id="btnSetDesc">Set Description</button>
            </div>
			
        </div>
<div>
        <div class="grid-section">
           <H2>Level Grid</H2>
            <table id="grid" title="game grid"  ></table>
            <div id="gridAnnouncer" aria-live="polite" aria-atomic="true"> </div>
     
</div>
        <div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:center; margin-bottom:10px;">
       
                <button id="btnGenerateSVG" class="gen-btn" style="flex:0 1 32%; min-width:140px; padding:8px 10px; font-size:13px;" aria-label="Generate an SVG map file of your level. The file will be downloaded to your computer.">Download SVG Map</button>
                <button id="btnGenerateWallsSVG" class="gen-btn" style="flex:0 1 32%; min-width:140px; padding:8px 10px; font-size:13px;" aria-label="Generate an SVG map file showing only walls. The file will be downloaded to your computer.">Download Wall Only Map</button>
            </div>
            
        </div>
    </div>

        <!-- Help text for form fields (hidden but available to screen readers) -->
        <div class="sr-only">
            <div id="rowsHelp">Enter a number between 1 and 12 for the number of grid rows.</div>
            <div id="colsHelp">Enter a number between 1 and 12 for the number of grid columns.</div>
            <div id="descHelp">Optional. Enter a text description or hint for the currently selected grid cell. This description will be shown to the player when they visit that cell.</div>
        </div></div>

<script src="levels.js"></script>

<script src="levelCreator.js"></script>


</body>
</html>